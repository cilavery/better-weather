(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);n(63),n(64),n(65);var a=n(0),r=n.n(a),c=n(36),i=n.n(c),o=n(12),u=n(15),l=n(16),s=n(18),p=n(17),m=n(19),h=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],d=function(e){return"imperial"===e?"\xbaF":"\xbaC"},f=function(e,t){return"imperial"===t?Array.isArray(e)?e.map(function(e){var t={},n={temp:v(Number(e.main.temp))};return t.dt=e.dt,t.weather=e.weather,t.main=n,t}):v(e):Array.isArray(e)?e.map(function(e){var t={},n={temp:E(Number(e.main.temp))};return t.dt=e.dt,t.weather=e.weather,t.main=n,t}):E(e)},E=function(e){return Math.round(5/9*(e-32))},v=function(e){return Math.round(9*e/5+32)},b=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(p.a)(t).call(this,e))).state={date:new Date,temp:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.weather.main;this.setState({temp:Math.round(e.temp)})}},{key:"componentDidUpdate",value:function(e){var t;e.unit!==this.props.unit&&(t=f(this.state.temp,this.props.unit),this.setState({temp:t})),e.weather.main.temp!==this.props.weather.main.temp&&this.setState({temp:Math.round(this.props.weather.main.temp)})}},{key:"render",value:function(){var e=this.state,t=e.date,n=e.temp,a=this.props.weather.weather,c=this.props.unit,i=t.toDateString();return r.a.createElement("div",{className:"text-center pt-5"},r.a.createElement("h4",null,i),r.a.createElement("p",null,a[0].main),r.a.createElement("i",{className:"wi wi-owm-".concat(a[0].id)}),r.a.createElement("div",{className:"d-flex flex-row justify-content-center align-items-baseline"},r.a.createElement("p",{className:"pt-5 temp-text"},n),r.a.createElement("p",null,d(c))))}}]),t}(a.Component),w=Object(o.b)(function(e){return{weather:e.current.weather,unit:e.unit}},null)(b),g=n(24),O=n.n(g),y=n(58),j=n.n(y),N=n(59),A=n.n(N),D=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(p.a)(t).call(this,e))).state={temps:[]},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.weather;this.selectAndSetWeather(e)}},{key:"componentDidUpdate",value:function(e){var t,n=this.props.unit;e.unit!==this.props.unit&&(t=f(this.state.temps,n),this.setState({temps:t})),e.weather!==this.props.weather&&this.selectAndSetWeather(this.props.weather)}},{key:"selectAndSetWeather",value:function(e){var t=function(e,t){return e.filter(function(e){return t.getDate()!==new Date(1e3*e.dt).getDate()&&9===new Date(e.dt_txt).getHours()})}(e,new Date);this.setState({temps:t})}},{key:"render",value:function(){var e=this.props.unit,t=this.state.temps;return r.a.createElement("div",{className:"text-center pt-5"},r.a.createElement(O.a,null,r.a.createElement(j.a,{className:"justify-content-center"},t.map(function(t,n){return r.a.createElement(A.a,{lg:2,key:n,className:"border p-4"},r.a.createElement("div",{className:"p-2"},(a=t.dt,h[new Date(1e3*a).getDay()])),r.a.createElement("div",{className:"p-2"},t.weather[0].main),r.a.createElement("i",{className:"wi wi-owm-".concat(t.weather[0].id," forecast")}),r.a.createElement("div",{className:"d-flex flex-row justify-content-center align-items-baseline"},r.a.createElement("div",{className:"pt-5 forecast-text"},Math.round(t.main.temp)),r.a.createElement("div",null,d(e))));var a}))))}}]),t}(a.Component),k=Object(o.b)(function(e){return{weather:e.fiveDay.weather.list,unit:e.unit}},null)(D),S=n(32),C=n.n(S),_=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){n.setState({address:e})},n.handleSelect=function(e){var t=n.props,a=t.getGeoLocation,r=t.unit;Object(S.geocodeByAddress)(e).then(function(e){return Object(S.getLatLng)(e[0])}).then(function(e){return a(e.lat,e.lng,r)}).catch(function(e){return console.error("Error",e)})},n.state={address:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},function(e){var t=e.getInputProps,n=e.suggestions,a=e.getSuggestionItemProps,c=e.loading;return r.a.createElement("div",null,r.a.createElement("input",t({placeholder:"Search Places ...",className:"location-search-input"})),r.a.createElement("div",{className:"autocomplete-dropdown-container border"},c&&r.a.createElement("div",null,"Loading..."),n.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",n=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",a(e,{className:t,style:n}),r.a.createElement("span",null,e.description))})))})}}]),t}(a.Component),x="APP/FETCH_WEATHER",P="APP/FETCH_FIVE_DAY",F=function(e){return{type:x,payload:e}},T=function(e){return{type:"APP/FETCH_WEATHER_SUCCESS",response:e}},L=function(e){return{type:"APP/FETCH_WEATHER_FAILURE",error:e}},U=function(e){return{type:P,payload:e}},I=function(e){return{type:"APP/FETCH_FIVE_DAY_SUCCESS",response:e}},H=function(e){return{type:"APP/FETCH_FIVE_DAY_FAILURE",error:e}},R=function(e){return{type:"APP/STORE_LOCATION_ENABLED",payload:e}},W=Object(o.b)(function(e){return{weather:e.current.weather,fiveDay:e.fiveDay.weather,unit:e.unit}},function(e){return{getGeoLocation:function(t,n,a){return function(e,t,n,a){var r={unit:n,lat:e,lon:t};a(F(r)),a(U(r)),a(R(!0))}(t,n,a,e)}}})(_),M=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){n.props.updateUnit(e.target.value)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.unit;return r.a.createElement("form",{className:"text-secondary"},r.a.createElement("label",{className:"pr-2"},"Change Unit:"),r.a.createElement("select",{value:e,onChange:this.handleChange},r.a.createElement("option",{value:"imperial"},"Fahrenheit"),r.a.createElement("option",{value:"metric"},"Celsius")))}}]),t}(a.Component),B=Object(o.b)(function(e){return{weather:e.current.weather,fiveDay:e.fiveDay.weather,unit:e.unit}},function(e){return{updateUnit:function(t){return function(e,t){t(function(e){return{type:"APP/STORE_UPDATE_UNIT",payload:e}}({unit:e}))}(t,e)}}})(M),G=(n(78),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"dot1"}),r.a.createElement("div",{className:"dot2"}))}),V=n(40),Y=n.n(V),K=n(60),J=n.n(K),X=n(27),$=n.n(X),q=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(p.a)(t).call(this,e))).successGeo=function(e){var t=n.props,a=t.getGeoLocation,r=t.unit,c=t.updateLocationEnabled;a(e.coords.latitude,e.coords.longitude,r),c(!0)},n.errorGeo=function(){(0,n.props.updateLocationEnabled)(!1)},n.state={locationEnabled:!0},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(this.successGeo,this.errorGeo)}},{key:"render",value:function(){var e=this,t=this.props,n=t.weather,c=t.fiveDay,i=t.locationEnabled;return r.a.createElement("div",null,"undefined"!==typeof n?r.a.createElement(a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement($.a,{bg:"dark",expand:"lg",variant:"dark",className:"justify-content-center"},r.a.createElement(O.a,null,r.a.createElement($.a.Brand,null,"Location: ",r.a.createElement("em",null,n.name)),r.a.createElement(W,null)))),r.a.createElement(J.a,{id:"controlled-tab-example",activeKey:this.state.key,onSelect:function(t){return e.setState({key:t})},className:"justify-content-center mt-5"},r.a.createElement(Y.a,{eventKey:"temp",title:"Current Temp",className:"pb-3"},i?i&&(n.isFetching||Object.keys(n).length<1)?r.a.createElement("div",null,r.a.createElement(G,null),r.a.createElement("p",{className:"text-center pt-5"},"Fetching Weather...")):r.a.createElement(w,null):r.a.createElement("div",{className:"text-center pt-5"},r.a.createElement(G,null),r.a.createElement("p",{className:"message"},"Please input a city")),n.fetchError?r.a.createElement("div",{className:"text-center pt-5"},r.a.createElement("p",{className:"error-text"},"There was a problem getting the weather")):null),r.a.createElement(Y.a,{eventKey:"forecast",title:"5-Day Forecast",className:"pb-5"},i?i&&(c.isFetching||Object.keys(c).length<1)?r.a.createElement("div",null,r.a.createElement(G,null),r.a.createElement("p",{className:"text-center pt-5"},"Fetching Weather...")):r.a.createElement(k,null):r.a.createElement("div",{className:"text-center pt-5"},r.a.createElement(G,null),r.a.createElement("p",{className:"message"},"Please input a city")),c.fetchError?r.a.createElement("div",{className:"text-center pt-5"},r.a.createElement("p",{className:"error-text"},"There was a problem getting the five day forecast")):null)),r.a.createElement(O.a,null,r.a.createElement($.a,{sticky:"bottom",expand:"lg",variant:"dark",bg:"dark"},r.a.createElement(O.a,null,r.a.createElement($.a.Brand,null,"Better Weather App"),r.a.createElement(B,null))))):null)}}]),t}(a.Component),z=Object(o.b)(function(e){return{weather:e.current.weather,fiveDay:e.fiveDay.weather,unit:e.unit,locationEnabled:e.locationEnabled}},function(e){return{getGeoLocation:function(t,n,a){return function(e,t,n,a){var r={unit:n,lat:e,lon:t};a(F(r)),a(U(r))}(t,n,a,e)},updateLocationEnabled:function(t){return function(e,t){t(R(e))}(t,e)}}})(q),Q=n(8),Z={current:{weather:{},isFetching:!1,fetchError:null},fiveDay:{weather:{},isFetching:!1,fetchError:null},unit:"imperial",locationEnabled:null},ee=n(14),te=n.n(ee),ne=n(13),ae=function(e){var t=e.unit,n=e.lat,a=e.lon;return fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(n,"&lon=").concat(a,"&units=").concat(t,"&appid=").concat("3317ddd89ed0eaa04733ad6ab3569291")).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok")})},re=function(e){var t=e.unit,n=e.lat,a=e.lon;return fetch("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(n,"&lon=").concat(a,"&units=").concat(t,"&appid=").concat("3317ddd89ed0eaa04733ad6ab3569291")).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok")})},ce=te.a.mark(se),ie=te.a.mark(pe),oe=te.a.mark(me),ue=te.a.mark(he),le=te.a.mark(de);function se(e){var t,n;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(ne.b)(ae,t);case 4:return n=a.sent,a.next=7,Object(ne.d)(T(n));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(1),a.next=13,Object(ne.d)(L(a.t0));case 13:case"end":return a.stop()}},ce,null,[[1,9]])}function pe(e){var t,n;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(ne.b)(re,t);case 4:return n=a.sent,a.next=7,Object(ne.d)(I(n));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(1),a.next=13,Object(ne.d)(H(a.t0));case 13:case"end":return a.stop()}},ie,null,[[1,9]])}function me(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)(x,se);case 2:case"end":return e.stop()}},oe)}function he(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)(P,pe);case 2:case"end":return e.stop()}},ue)}function de(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.a)([Object(ne.c)(me),Object(ne.c)(he)]);case 2:case"end":return e.stop()}},le)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=n(23),Ee=n(61),ve=Object(Ee.a)(),be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||fe.c,we=Object(fe.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(Q.a)({},e,{current:Object(Q.a)({},e.current,{isFetching:!0,fetchError:null})});case"APP/FETCH_WEATHER_SUCCESS":return Object(Q.a)({},e,{current:Object(Q.a)({},e.current,{weather:Object(Q.a)({},t.response),isFetching:!1,fetchError:null})});case"APP/FETCH_WEATHER_FAILURE":return Object(Q.a)({},e,{current:Object(Q.a)({},e.current,{isFetching:!1,fetchError:t.error.toString()})});case P:return Object(Q.a)({},e,{fiveDay:Object(Q.a)({},e.fiveDay,{isFetching:!0,fetchError:null})});case"APP/FETCH_FIVE_DAY_SUCCESS":return Object(Q.a)({},e,{fiveDay:Object(Q.a)({},e.fiveDay,{weather:Object(Q.a)({},t.response),isFetching:!1,fetchError:null})});case"APP/FETCH_FIVE_DAY_FAILURE":return Object(Q.a)({},e,{fiveDay:Object(Q.a)({},e.fiveDay,{isFetching:!1,fetchError:t.error.toString()})});case"APP/STORE_UPDATE_UNIT":return Object(Q.a)({},e,{unit:t.payload.unit});case"APP/STORE_LOCATION_ENABLED":return Object(Q.a)({},e,{locationEnabled:t.payload});default:return e}},be(Object(fe.a)(ve)));ve.run(de);var ge=we;i.a.render(r.a.createElement(o.a,{store:ge},r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},62:function(e,t,n){e.exports=n(107)},64:function(e,t,n){},65:function(e,t,n){},78:function(e,t,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.fbf8ff7c.chunk.js.map